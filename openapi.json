{"$defs": {"AdamOptimizer": {"properties": {"optimizer_type": {"const": "AdamW", "default": "AdamW", "title": "Optimizer Type"}, "beta1": {"default": 0.9, "title": "Beta1", "type": "number"}, "beta2": {"default": 0.999, "title": "Beta2", "type": "number"}, "weight_decay": {"default": 0.01, "title": "Weight Decay", "type": "number"}, "epsilon": {"default": 1e-08, "title": "Epsilon", "type": "number"}}, "title": "AdamOptimizer", "type": "object"}, "DreamboothSDDataLoaderConfig": {"properties": {"type": {"const": "DREAMBOOTH_SD_DATA_LOADER", "default": "DREAMBOOTH_SD_DATA_LOADER", "title": "Type"}, "instance_caption": {"title": "Instance Caption", "type": "string"}, "class_caption": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Class Caption"}, "instance_dataset": {"$ref": "#/$defs/ImageDirDatasetConfig"}, "class_dataset": {"anyOf": [{"$ref": "#/$defs/ImageDirDatasetConfig"}, {"type": "null"}], "default": null}, "class_data_loss_weight": {"default": 1.0, "title": "Class Data Loss Weight", "type": "number"}, "image_transforms": {"$ref": "#/$defs/SDImageTransformConfig"}, "dataloader_num_workers": {"default": 0, "title": "Dataloader Num Workers", "type": "integer"}}, "required": ["instance_caption", "instance_dataset", "image_transforms"], "title": "DreamboothSDDataLoaderConfig", "type": "object"}, "DreamboothSDXLDataLoaderConfig": {"properties": {"type": {"const": "DREAMBOOTH_SDXL_DATA_LOADER", "default": "DREAMBOOTH_SDXL_DATA_LOADER", "title": "Type"}, "instance_caption": {"title": "Instance Caption", "type": "string"}, "class_caption": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Class Caption"}, "instance_dataset": {"$ref": "#/$defs/ImageDirDatasetConfig"}, "class_dataset": {"anyOf": [{"$ref": "#/$defs/ImageDirDatasetConfig"}, {"type": "null"}], "default": null}, "class_data_loss_weight": {"default": 1.0, "title": "Class Data Loss Weight", "type": "number"}, "image_transforms": {"$ref": "#/$defs/SDXLImageTransformConfig"}, "dataloader_num_workers": {"default": 0, "title": "Dataloader Num Workers", "type": "integer"}}, "required": ["instance_caption", "instance_dataset", "image_transforms"], "title": "DreamboothSDXLDataLoaderConfig", "type": "object"}, "FinetuneLoRASDConfig": {"properties": {"type": {"const": "FINETUNE_LORA_SD", "default": "FINETUNE_LORA_SD", "title": "Type"}, "seed": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "title": "Seed"}, "output": {"$ref": "#/$defs/TrainingOutputConfig"}, "model": {"default": "runwayml/stable-diffusion-v1-5", "title": "Model", "type": "string"}, "train_unet": {"default": true, "title": "Train Unet", "type": "boolean"}, "train_text_encoder": {"default": true, "title": "Train Text Encoder", "type": "boolean"}, "text_encoder_learning_rate": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "title": "Text Encoder Learning Rate"}, "unet_learning_rate": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "title": "Unet Learning Rate"}, "train_unet_non_attention_blocks": {"default": false, "title": "Train Unet Non Attention Blocks", "type": "boolean"}, "lora_rank_dim": {"default": 4, "title": "Lora Rank Dim", "type": "integer"}, "cache_text_encoder_outputs": {"default": false, "title": "Cache Text Encoder Outputs", "type": "boolean"}, "cache_vae_outputs": {"default": false, "title": "Cache Vae Outputs", "type": "boolean"}, "enable_cpu_offload_during_validation": {"default": false, "title": "Enable Cpu Offload During Validation", "type": "boolean"}, "gradient_accumulation_steps": {"default": 1, "title": "Gradient Accumulation Steps", "type": "integer"}, "mixed_precision": {"anyOf": [{"enum": ["no", "fp16", "bf16", "fp8"], "type": "string"}, {"type": "null"}], "default": null, "title": "Mixed Precision"}, "xformers": {"default": false, "title": "Xformers", "type": "boolean"}, "gradient_checkpointing": {"default": false, "title": "Gradient Checkpointing", "type": "boolean"}, "max_train_steps": {"default": 5000, "title": "Max Train Steps", "type": "integer"}, "save_every_n_epochs": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": 1, "title": "Save Every N Epochs"}, "save_every_n_steps": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "title": "Save Every N Steps"}, "max_checkpoints": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "title": "Max Checkpoints"}, "prediction_type": {"anyOf": [{"enum": ["epsilon", "v_prediction"], "type": "string"}, {"type": "null"}], "default": null, "title": "Prediction Type"}, "max_grad_norm": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": 1.0, "title": "Max Grad Norm"}, "validation_prompts": {"default": [], "items": {"type": "string"}, "title": "Validation Prompts", "type": "array"}, "num_validation_images_per_prompt": {"default": 4, "title": "Num Validation Images Per Prompt", "type": "integer"}, "validate_every_n_epochs": {"default": 1, "title": "Validate Every N Epochs", "type": "integer"}, "train_batch_size": {"default": 4, "title": "Train Batch Size", "type": "integer"}, "optimizer": {"$ref": "#/$defs/OptimizerConfig"}, "data_loader": {"discriminator": {"mapping": {"DREAMBOOTH_SD_DATA_LOADER": "#/$defs/DreamboothSDDataLoaderConfig", "IMAGE_CAPTION_SD_DATA_LOADER": "#/$defs/ImageCaptionSDDataLoaderConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/ImageCaptionSDDataLoaderConfig"}, {"$ref": "#/$defs/DreamboothSDDataLoaderConfig"}], "title": "Data Loader"}}, "required": ["output", "optimizer", "data_loader"], "title": "FinetuneLoRASDConfig", "type": "object"}, "FinetuneLoRASDXLConfig": {"properties": {"type": {"const": "FINETUNE_LORA_SDXL", "default": "FINETUNE_LORA_SDXL", "title": "Type"}, "seed": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "title": "Seed"}, "output": {"$ref": "#/$defs/TrainingOutputConfig"}, "model": {"default": "runwayml/stable-diffusion-v1-5", "title": "Model", "type": "string"}, "train_unet": {"default": true, "title": "Train Unet", "type": "boolean"}, "train_text_encoder": {"default": true, "title": "Train Text Encoder", "type": "boolean"}, "text_encoder_learning_rate": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "title": "Text Encoder Learning Rate"}, "unet_learning_rate": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": null, "title": "Unet Learning Rate"}, "train_unet_non_attention_blocks": {"default": false, "title": "Train Unet Non Attention Blocks", "type": "boolean"}, "lora_rank_dim": {"default": 4, "title": "Lora Rank Dim", "type": "integer"}, "cache_text_encoder_outputs": {"default": false, "title": "Cache Text Encoder Outputs", "type": "boolean"}, "cache_vae_outputs": {"default": false, "title": "Cache Vae Outputs", "type": "boolean"}, "enable_cpu_offload_during_validation": {"default": false, "title": "Enable Cpu Offload During Validation", "type": "boolean"}, "gradient_accumulation_steps": {"default": 1, "title": "Gradient Accumulation Steps", "type": "integer"}, "mixed_precision": {"anyOf": [{"enum": ["no", "fp16", "bf16", "fp8"], "type": "string"}, {"type": "null"}], "default": null, "title": "Mixed Precision"}, "xformers": {"default": false, "title": "Xformers", "type": "boolean"}, "gradient_checkpointing": {"default": false, "title": "Gradient Checkpointing", "type": "boolean"}, "max_train_steps": {"default": 5000, "title": "Max Train Steps", "type": "integer"}, "save_every_n_epochs": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": 1, "title": "Save Every N Epochs"}, "save_every_n_steps": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "title": "Save Every N Steps"}, "max_checkpoints": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "title": "Max Checkpoints"}, "prediction_type": {"anyOf": [{"enum": ["epsilon", "v_prediction"], "type": "string"}, {"type": "null"}], "default": null, "title": "Prediction Type"}, "max_grad_norm": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": 1.0, "title": "Max Grad Norm"}, "validation_prompts": {"default": [], "items": {"type": "string"}, "title": "Validation Prompts", "type": "array"}, "num_validation_images_per_prompt": {"default": 4, "title": "Num Validation Images Per Prompt", "type": "integer"}, "validate_every_n_epochs": {"default": 1, "title": "Validate Every N Epochs", "type": "integer"}, "train_batch_size": {"default": 4, "title": "Train Batch Size", "type": "integer"}, "optimizer": {"$ref": "#/$defs/OptimizerConfig"}, "data_loader": {"discriminator": {"mapping": {"DREAMBOOTH_SDXL_DATA_LOADER": "#/$defs/DreamboothSDXLDataLoaderConfig", "IMAGE_CAPTION_SDXL_DATA_LOADER": "#/$defs/ImageCaptionSDXLDataLoaderConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/ImageCaptionSDXLDataLoaderConfig"}, {"$ref": "#/$defs/DreamboothSDXLDataLoaderConfig"}], "title": "Data Loader"}, "vae_model": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Vae Model"}}, "required": ["output", "optimizer", "data_loader"], "title": "FinetuneLoRASDXLConfig", "type": "object"}, "HFDirImageCaptionDatasetConfig": {"properties": {"type": {"const": "HF_DIR_IMAGE_CAPTION_DATASET", "default": "HF_DIR_IMAGE_CAPTION_DATASET", "title": "Type"}, "dataset_dir": {"title": "Dataset Dir", "type": "string"}, "image_column": {"default": "image", "title": "Image Column", "type": "string"}, "caption_column": {"default": "text", "title": "Caption Column", "type": "string"}}, "required": ["dataset_dir"], "title": "HFDirImageCaptionDatasetConfig", "type": "object"}, "HFHubImageCaptionDatasetConfig": {"properties": {"type": {"const": "HF_HUB_IMAGE_CAPTION_DATASET", "default": "HF_HUB_IMAGE_CAPTION_DATASET", "title": "Type"}, "dataset_name": {"title": "Dataset Name", "type": "string"}, "dataset_config_name": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Dataset Config Name"}, "hf_cache_dir": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Hf Cache Dir"}, "image_column": {"default": "image", "title": "Image Column", "type": "string"}, "caption_column": {"default": "text", "title": "Caption Column", "type": "string"}}, "required": ["dataset_name"], "title": "HFHubImageCaptionDatasetConfig", "type": "object"}, "ImageCaptionSDDataLoaderConfig": {"properties": {"type": {"const": "IMAGE_CAPTION_SD_DATA_LOADER", "default": "IMAGE_CAPTION_SD_DATA_LOADER", "title": "Type"}, "dataset": {"discriminator": {"mapping": {"HF_DIR_IMAGE_CAPTION_DATASET": "#/$defs/HFDirImageCaptionDatasetConfig", "HF_HUB_IMAGE_CAPTION_DATASET": "#/$defs/HFHubImageCaptionDatasetConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/HFDirImageCaptionDatasetConfig"}, {"$ref": "#/$defs/HFHubImageCaptionDatasetConfig"}], "title": "Dataset"}, "image_transforms": {"$ref": "#/$defs/SDImageTransformConfig"}, "dataloader_num_workers": {"default": 0, "title": "Dataloader Num Workers", "type": "integer"}}, "required": ["dataset", "image_transforms"], "title": "ImageCaptionSDDataLoaderConfig", "type": "object"}, "ImageCaptionSDXLDataLoaderConfig": {"properties": {"type": {"const": "IMAGE_CAPTION_SDXL_DATA_LOADER", "default": "IMAGE_CAPTION_SDXL_DATA_LOADER", "title": "Type"}, "dataset": {"discriminator": {"mapping": {"HF_DIR_IMAGE_CAPTION_DATASET": "#/$defs/HFDirImageCaptionDatasetConfig", "HF_HUB_IMAGE_CAPTION_DATASET": "#/$defs/HFHubImageCaptionDatasetConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/HFDirImageCaptionDatasetConfig"}, {"$ref": "#/$defs/HFHubImageCaptionDatasetConfig"}], "title": "Dataset"}, "image_transforms": {"$ref": "#/$defs/SDXLImageTransformConfig"}, "dataloader_num_workers": {"default": 0, "title": "Dataloader Num Workers", "type": "integer"}}, "required": ["dataset", "image_transforms"], "title": "ImageCaptionSDXLDataLoaderConfig", "type": "object"}, "ImageDirDatasetConfig": {"properties": {"type": {"const": "IMAGE_DIR_DATASET", "default": "IMAGE_DIR_DATASET", "title": "Type"}, "dataset_dir": {"title": "Dataset Dir", "type": "string"}}, "required": ["dataset_dir"], "title": "ImageDirDatasetConfig", "type": "object"}, "OptimizerConfig": {"description": "Configuration for a training optimizer.", "properties": {"optimizer": {"anyOf": [{"$ref": "#/$defs/AdamOptimizer"}, {"$ref": "#/$defs/ProdigyOptimizer"}], "default": {"optimizer_type": "AdamW", "beta1": 0.9, "beta2": 0.999, "weight_decay": 0.01, "epsilon": 1e-08}, "title": "Optimizer"}, "learning_rate": {"default": 0.0001, "title": "Learning Rate", "type": "number"}, "lr_scheduler": {"default": "constant", "enum": ["linear", "cosine", "cosine_with_restarts", "polynomial", "constant", "constant_with_warmup"], "title": "Lr Scheduler", "type": "string"}, "lr_warmup_steps": {"default": 0, "title": "Lr Warmup Steps", "type": "integer"}}, "title": "OptimizerConfig", "type": "object"}, "ProdigyOptimizer": {"properties": {"optimizer_type": {"const": "Prodigy", "default": "Prodigy", "title": "Optimizer Type"}, "weight_decay": {"default": 0.0, "title": "Weight Decay", "type": "number"}, "use_bias_correction": {"default": false, "title": "Use Bias Correction", "type": "boolean"}, "safeguard_warmup": {"default": false, "title": "Safeguard Warmup", "type": "boolean"}}, "title": "ProdigyOptimizer", "type": "object"}, "SDImageTransformConfig": {"properties": {"resolution": {"default": 512, "title": "Resolution", "type": "integer"}, "center_crop": {"default": true, "title": "Center Crop", "type": "boolean"}, "random_flip": {"default": false, "title": "Random Flip", "type": "boolean"}}, "title": "SDImageTransformConfig", "type": "object"}, "SDXLImageTransformConfig": {"properties": {"resolution": {"default": 1024, "title": "Resolution", "type": "integer"}, "center_crop": {"default": true, "title": "Center Crop", "type": "boolean"}, "random_flip": {"default": false, "title": "Random Flip", "type": "boolean"}}, "title": "SDXLImageTransformConfig", "type": "object"}, "ShuffleCaptionTransformConfig": {"properties": {"delimiter": {"default": ",", "title": "Delimiter", "type": "string"}}, "title": "ShuffleCaptionTransformConfig", "type": "object"}, "TextualInversionCaptionTransformConfig": {"properties": {"type": {"const": "TEXTUAL_INVERSION_CAPTION_TRANSFORM", "default": "TEXTUAL_INVERSION_CAPTION_TRANSFORM", "title": "Type"}, "templates": {"items": {"type": "string"}, "title": "Templates", "type": "array"}}, "required": ["templates"], "title": "TextualInversionCaptionTransformConfig", "type": "object"}, "TextualInversionPresetCaptionTransformConfig": {"properties": {"type": {"const": "TEXTUAL_INVERSION_PRESET_CAPTION_TRANSFORM", "default": "TEXTUAL_INVERSION_PRESET_CAPTION_TRANSFORM", "title": "Type"}, "preset": {"enum": ["style", "object"], "title": "Preset", "type": "string"}}, "required": ["preset"], "title": "TextualInversionPresetCaptionTransformConfig", "type": "object"}, "TextualInversionSDConfig": {"properties": {"type": {"const": "TEXTUAL_INVERSION_SD", "default": "TEXTUAL_INVERSION_SD", "title": "Type"}, "seed": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "title": "Seed"}, "output": {"$ref": "#/$defs/TrainingOutputConfig"}, "model": {"default": "runwayml/stable-diffusion-v1-5", "title": "Model", "type": "string"}, "num_vectors": {"default": 1, "title": "Num Vectors", "type": "integer"}, "placeholder_token": {"title": "Placeholder Token", "type": "string"}, "initializer_token": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Initializer Token"}, "initial_embedding_file": {"anyOf": [{"type": "string"}, {"type": "null"}], "default": null, "title": "Initial Embedding File"}, "cache_vae_outputs": {"default": false, "title": "Cache Vae Outputs", "type": "boolean"}, "enable_cpu_offload_during_validation": {"default": false, "title": "Enable Cpu Offload During Validation", "type": "boolean"}, "gradient_accumulation_steps": {"default": 1, "title": "Gradient Accumulation Steps", "type": "integer"}, "mixed_precision": {"anyOf": [{"enum": ["no", "fp16", "bf16", "fp8"], "type": "string"}, {"type": "null"}], "default": null, "title": "Mixed Precision"}, "xformers": {"default": false, "title": "Xformers", "type": "boolean"}, "gradient_checkpointing": {"default": false, "title": "Gradient Checkpointing", "type": "boolean"}, "max_train_steps": {"default": 5000, "title": "Max Train Steps", "type": "integer"}, "save_every_n_epochs": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": 1, "title": "Save Every N Epochs"}, "save_every_n_steps": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "title": "Save Every N Steps"}, "max_checkpoints": {"anyOf": [{"type": "integer"}, {"type": "null"}], "default": null, "title": "Max Checkpoints"}, "prediction_type": {"anyOf": [{"enum": ["epsilon", "v_prediction"], "type": "string"}, {"type": "null"}], "default": null, "title": "Prediction Type"}, "max_grad_norm": {"anyOf": [{"type": "number"}, {"type": "null"}], "default": 1.0, "title": "Max Grad Norm"}, "validation_prompts": {"default": [], "items": {"type": "string"}, "title": "Validation Prompts", "type": "array"}, "num_validation_images_per_prompt": {"default": 4, "title": "Num Validation Images Per Prompt", "type": "integer"}, "validate_every_n_epochs": {"default": 1, "title": "Validate Every N Epochs", "type": "integer"}, "train_batch_size": {"default": 4, "title": "Train Batch Size", "type": "integer"}, "optimizer": {"$ref": "#/$defs/OptimizerConfig"}, "data_loader": {"$ref": "#/$defs/TextualInversionSDDataLoaderConfig"}}, "required": ["output", "placeholder_token", "optimizer", "data_loader"], "title": "TextualInversionSDConfig", "type": "object"}, "TextualInversionSDDataLoaderConfig": {"properties": {"type": {"const": "TEXTUAL_INVERSION_SD_DATA_LOADER", "default": "TEXTUAL_INVERSION_SD_DATA_LOADER", "title": "Type"}, "dataset": {"$ref": "#/$defs/ImageDirDatasetConfig"}, "captions": {"discriminator": {"mapping": {"TEXTUAL_INVERSION_CAPTION_TRANSFORM": "#/$defs/TextualInversionCaptionTransformConfig", "TEXTUAL_INVERSION_PRESET_CAPTION_TRANSFORM": "#/$defs/TextualInversionPresetCaptionTransformConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/TextualInversionCaptionTransformConfig"}, {"$ref": "#/$defs/TextualInversionPresetCaptionTransformConfig"}], "title": "Captions"}, "image_transforms": {"$ref": "#/$defs/SDImageTransformConfig"}, "shuffle_caption_transform": {"anyOf": [{"$ref": "#/$defs/ShuffleCaptionTransformConfig"}, {"type": "null"}], "default": null}, "dataloader_num_workers": {"default": 0, "title": "Dataloader Num Workers", "type": "integer"}}, "required": ["dataset", "captions", "image_transforms"], "title": "TextualInversionSDDataLoaderConfig", "type": "object"}, "TrainingOutputConfig": {"description": "Configuration for a training run's output.", "properties": {"base_output_dir": {"title": "Base Output Dir", "type": "string"}, "report_to": {"anyOf": [{"enum": ["all", "tensorboard", "wandb", "comet_ml"], "type": "string"}, {"type": "null"}], "default": "tensorboard", "title": "Report To"}, "save_model_as": {"default": "safetensors", "enum": ["ckpt", "pt", "safetensors"], "title": "Save Model As", "type": "string"}}, "required": ["base_output_dir"], "title": "TrainingOutputConfig", "type": "object"}}, "discriminator": {"mapping": {"FINETUNE_LORA_SD": "#/$defs/FinetuneLoRASDConfig", "FINETUNE_LORA_SDXL": "#/$defs/FinetuneLoRASDXLConfig", "TEXTUAL_INVERSION_SD": "#/$defs/TextualInversionSDConfig"}, "propertyName": "type"}, "oneOf": [{"$ref": "#/$defs/FinetuneLoRASDConfig"}, {"$ref": "#/$defs/FinetuneLoRASDXLConfig"}, {"$ref": "#/$defs/TextualInversionSDConfig"}]}